(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{115:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return b})),a.d(t,"default",(function(){return l}));var i=a(2),n=a(6),r=(a(0),a(143)),c={},o={id:"SUIB-solutions",isDocsHomePage:!1,title:"SUIB-solutions",description:"Device Onboarding",source:"@site/docs/SUIB-solutions.md",permalink:"/ManySecured-SUIB/docs/SUIB-solutions",editUrl:"https://github.com/TechWorksHub/ManySecured-SUIB/docs/SUIB-solutions.md"},b=[{value:"Initial Device Identifier",id:"initial-device-identifier",children:[]},{value:"FIDO Device Onboarding",id:"fido-device-onboarding",children:[]},{value:"MATTER Onboarding",id:"matter-onboarding",children:[]},{value:"MUD Credentials",id:"mud-credentials",children:[]},{value:"Nicks List",id:"nicks-list",children:[]}],s={rightToc:b};function l(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},s,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"device-onboarding"},"Device Onboarding"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"There are several elements we need to consider for the onboarding process."),Object(r.b)("ul",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ul"},"physical on boarding to wifi etc. Currently out of scope for this document. increasingly beeing addressed with BLE to provision WIFI credentials"),Object(r.b)("li",{parentName:"ul"},"user permissioning: some method by which user consciously onboards the device. If physical network is adhering to zero trust principles then we can assume this step bootstraps some form of segmented security"),Object(r.b)("li",{parentName:"ul"},"device verification: may be optional step, but security hygiene may mean that device needs to be validated before on boarding")),Object(r.b)("p",{parentName:"blockquote"},"these are important issues to consider as they impact"),Object(r.b)("ol",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ol"},"user experenice"),Object(r.b)("li",{parentName:"ol"},"commercial control points"))),Object(r.b)("h1",{id:"integration-of-external-trust-roots"},"Integration of external trust roots"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Question: what might we want to ask"),Object(r.b)("ol",{parentName:"blockquote"},Object(r.b)("li",{parentName:"ol"},"device attestion: is there trust in the device"),Object(r.b)("li",{parentName:"ol"},"user brokering: is the user happy the device is onboard"),Object(r.b)("li",{parentName:"ol"},"anythiing else  ?"),Object(r.b)("li",{parentName:"ol"}))),Object(r.b)("h2",{id:"initial-device-identifier"},"Initial Device Identifier"),Object(r.b)("p",null,"IEEE 802.1AR specifies a secure device identity. Manufacturers can embed an initial device identifier certificate to a device. The initial certificate (IDevID) typically has an infinite lifetime. It can validate the device is from the manufacturer. This can be used to enroll a certificate with a limited validity and with the domainname used within the network.\n",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://1.ieee802.org/security/802-1ar/"}),"https://1.ieee802.org/security/802-1ar/")),Object(r.b)("p",null,"BRSKI describes the bootstrapping process on how the IDevID certificate can be used for certificate enrollment (IETF EST). The manufacturer can operate a MASA to verify the certificate and the device is configured as part of the domain, so that it can sign a local context LDevID certificate.\n",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://datatracker.ietf.org/doc/html/rfc8995/"}),"https://datatracker.ietf.org/doc/html/rfc8995/")),Object(r.b)("p",null,"For BRSKI to provision home devices with a valid certificate, they would need a globally unique address. Yet home devices normally do not have a domain."),Object(r.b)("h2",{id:"fido-device-onboarding"},"FIDO Device Onboarding"),Object(r.b)("p",null,Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://fidoalliance.org/specs/FDO/fido-device-onboard-v1.0-ps-20210323/fido-device-onboard-v1.0-ps-20210323.html"}),"https://fidoalliance.org/specs/FDO/fido-device-onboard-v1.0-ps-20210323/fido-device-onboard-v1.0-ps-20210323.html")),Object(r.b)("p",null,"The FIDO alliance has defined a method of onboarding IoT devices. This onboarding process contains several pieces of information which could be used to negotiate a security session:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"Device Attestation Key"),": a unique key provisioned on the end point device. The device key is provisioned using the ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://fidoalliance.org/specs/FDO/fido-device-onboard-v1.0-ps-20210323/fido-device-onboard-v1.0-ps-20210323.html#appendix-b-device-key-provisioning-with-ecdsa"}),"Device Key Provisioning with ECDSA")," process as an example "),Object(r.b)("li",{parentName:"ol"},Object(r.b)("strong",{parentName:"li"},"Device credential"),": the ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"https://fidoalliance.org/specs/FDO/fido-device-onboard-v1.0-ps-20210323/fido-device-onboard-v1.0-ps-20210323.html#DeviceCredential"}),"Device Credential Persisted Type (non-normative)")," is a signed JSON/CBOR structure that contains key device metadata, in particular ",Object(r.b)("inlineCode",{parentName:"li"},"DCDeviceInfo")," which could be used in the bootstrapping of  a secure session")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Question  can we pull something form  Ownership Voucher e.g. inital owner is manufacturer ?"),Object(r.b)("p",{parentName:"blockquote"},"FDO mentions this on IETF Voucher Artifact differences"),Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("em",{parentName:"p"},"The Ownership Voucher is distinct from the Voucher Artifact described in [",Object(r.b)("a",Object(i.a)({parentName:"em"},{href:"https://fidoalliance.org/specs/FDO/fido-device-onboard-v1.0-ps-20210323/fido-device-onboard-v1.0-ps-20210323.html#biblio-rfc8366"}),"RFC8366","]"),", although both are structured documents that convey trust.  The Ownership Voucher here conveys trust through the supply chain from the manufacturer, being the original 'owner' of the Device, to the ultimate Owner who will use the Device in a production setting. The Voucher Artifact is a dynamically generated object which provides an endorsement of the Device from a trusted authority (the \"MASA\")."))),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Question: FIDO device onboarding is managed with server-based rendezvous servers. But some of this info is still available even if FIDO oboarding as not completed as they are assumed pre-conditions")),Object(r.b)("p",null,"To be of practical use the implementation of the device hosed web server would need access to the private attestation key, the device credential and any other information relevant eg ownership voucher. "),Object(r.b)("p",null,"The meaningful information could be encapsulated as X.509 certificate if using traditional HTTPS certificates. Or as signed tokens."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"}," TODO: The exact format as use of fields for either X.509 or tokens need to be defined "),Object(r.b)("p",{parentName:"blockquote"},"TODO: the preconditions within the browser and the semantics of establishing root of trust needs to be defined.  ")),Object(r.b)("h2",{id:"matter-onboarding"},"MATTER Onboarding"),Object(r.b)("p",null,"The emerging MATTER standard being created under the Connectivity Standards Alliance is also creating device management and user provisioning protocols, where cryptographic primitives are persisted as a result of various manufacturer and device onboarding activities."),Object(r.b)("p",null,"The standard is not yet public, but we can expect similar components to those we see in the FIDO onboarding flows."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Nick: flow is similar to above but uses matter keys and credentials ")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"}," TODO: the root of trust semantics might be partly addressed by the MATTER approach to root of trust ")),Object(r.b)("h2",{id:"mud-credentials"},"MUD Credentials"),Object(r.b)("p",null,"The MUD specification does have security relevant information that could be used in the bootstrapping of a trusted TLS connection between browser and IOT device, specifically information on manufacture and device type.  This information can be securely resolved form the MUD document. "),Object(r.b)("p",null,"However as it stands the MUD specification does not directly address the issue if device based client private keys, excepting the reference to IEEE 802.1AR"),Object(r.b)("h1",{id:"7-bringing-it-together"},"7. Bringing it together"),Object(r.b)("p",null,"The enable local encryption there are three aspects that need to be addressed. The local network needs a reliable way to identify that the device really came from the vendor, the network needs a reliable way to name a device and the browser needs to have a trust anchor that trusts these devices."),Object(r.b)("p",null,"In the current situation, the ingredients exist to create a solution that will satisfy the local trust, but there is no consistent coherent way which will work every time for everyone in every situation. It will require consensus building to achieve a reliable trust chain."),Object(r.b)("p",null,"Changes in the browser, certificate signing process or infrastructure to support domains can solve this issue, but it requires significant standardisation and organisation."),Object(r.b)("h2",{id:"nicks-list"},"Nicks List"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Naming of devices: outline the different methods/syntax we might have for naming devices  : course grained")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"#","pubkey + bound domain")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Friendly name + bound domain")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Where bound domain could be")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Manufacturer allocated domain = ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"http://devices.manuactrue.com"}),"devices.manufacturer.com")),Object(r.b)("li",{parentName:"ul"},"End user allocated domain = ",Object(r.b)("a",Object(i.a)({parentName:"li"},{href:"http://nick.allott.com"}),"nick.allott.com")," "),Object(r.b)("li",{parentName:"ul"},"Other\u2026"))))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Name resolution: list out the different name     resolver methods")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"DNS based")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Embedded physical address"),Object(r.b)("li",{parentName:"ul"},"DynDNS"),Object(r.b)("li",{parentName:"ul"},"mDNS"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Other\u2026. Non DNS methods")))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Certificate usage \u2013 trust framework ")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"List out the current ways certificates are used \u2013 outlining pros and cons"),Object(r.b)("li",{parentName:"ul"},"Outline use of extended fields for X509"),Object(r.b)("li",{parentName:"ul"},"Discuss the certificate storage (private key storage) requirements"),Object(r.b)("li",{parentName:"ul"},"Potential use of non X509 trust anchors"),Object(r.b)("li",{parentName:"ul"},"Device validation methods (trusted manufactures)      "))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Bringing it all together")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Look at full Lifecyle- for different      alternatives")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Specific the flows (sequence diagrams for different flows) e.g.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Device DNS Name \u2013 embedded device variation (manufacturer managed \u2013 or manufacture delegated) "),Object(r.b)("li",{parentName:"ul"},"Device DNS \u2013 DynDNS version (manufacturer managed\u2013 or manufacture delegated)"),Object(r.b)("li",{parentName:"ul"},"Gateway issued name and certificate (user managed)"),Object(r.b)("li",{parentName:"ul"},"Application issued name and certificate (user managed)"),Object(r.b)("li",{parentName:"ul"},"Other\u2026."))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"For each consider")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"Browser implementation details: which methods impact browser behaviour"),Object(r.b)("li",{parentName:"ul"},"Changes needed to device"),Object(r.b)("li",{parentName:"ul"},"Changes needed to DNS server infrastructure "),Object(r.b)("li",{parentName:"ul"},"Changes needed to server based CA infrastructure "),Object(r.b)("li",{parentName:"ul"},"Changes needed to gateway \u2013 or local infrastructure"),Object(r.b)("li",{parentName:"ul"},"User experience "),Object(r.b)("li",{parentName:"ul"},"Ecosystem impacts ")))))),Object(r.b)("h1",{id:"todos"},"TODOs:"),Object(r.b)("ul",{className:"contains-task-list"},Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","Ask ","[Hannes]"," to comment on FIDO issues")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ",Object(r.b)("strong",{parentName:"p"},"Ask ","[CA]"," to check the current implementation issues"))),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]","  CA/existing methods: push forward the certificate tool and add some stats")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]"," made recommenations on use of certificates")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ","[other]"," review refine use of certificate ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ","[Nick]"," add detail on Matter implementation  ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ","IEEE 802.1AR - add details on feasibility/desirability  - what is the definitive reference for this")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Jan]","  X.509 Certificate Key Usage for Home Devices: validate the intent or this section ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]"," flesh out gateway method - and repurpose Device gateway section ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ","[other]"," initial review of gateway approach ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!1,disabled:!0}))," ","[Nick]"," flesh out application method ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]"," Added draft on non certificate based trust ")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]"," Added information on FIDO + Matter +MUD")),Object(r.b)("li",Object(i.a)({parentName:"ul"},{className:"task-list-item"}),Object(r.b)("p",{parentName:"li"},Object(r.b)("input",Object(i.a)({parentName:"p"},{type:"checkbox",checked:!0,disabled:!0}))," ","[Nick]"," seperated out the DynDNS and embbeded local address flow "))))}l.isMDXComponent=!0},143:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var i=a(0),n=a.n(i);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,i,n=function(e,t){if(null==e)return{};var a,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)a=r[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=n.a.createContext({}),l=function(e){var t=n.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=l(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},u=n.a.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,s=b(e,["components","mdxType","originalType","parentName"]),d=l(a),u=i,m=d["".concat(c,".").concat(u)]||d[u]||p[u]||r;return a?n.a.createElement(m,o(o({ref:t},s),{},{components:a})):n.a.createElement(m,o({ref:t},s))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,c=new Array(r);c[0]=u;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType="string"==typeof e?e:i,c[1]=o;for(var s=2;s<r;s++)c[s]=a[s];return n.a.createElement.apply(null,c)}return n.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"}}]);